{% extends "/layouts/main.html" %}

{% set pageTitle = "Day 11: Check table structure in the Reindeer Flight Schedule" %}
{% set currentDayNumber = 11 %}

{% block beforeContent %}
  {{ govukBackLink({
      text: "Back to home",
      href: "/"
  }) }}
{% endblock %}

{% block content %}

<h1 class="govuk-heading-l">Day 11: Check table structure in the Reindeer Flight Schedule</h1>

<p class="govuk-body">
  The <strong>Reindeer Flight Operations Team</strong> publishes a daily schedule showing
  which reindeer are flying, their cruising speed and which pilot elf is assigned.
  In today’s update, one column has been styled to look like a header, but is not
  marked up correctly.
</p>

<p class="govuk-body">
  Today, you’ll check whether table headers are defined semantically so that screen
  reader users can understand how the data is structured.
</p>

<h2 class="govuk-heading-m">Your mission today</h2>
<p class="govuk-body">
  Identify the column that visually looks like a header but is not marked up as one.
</p>

<h2 class="govuk-heading-m">Quick 5-minute check</h2>
<ul class="govuk-list govuk-list--bullet">
  <li>column headers must use <code>&lt;th&gt;</code>, not <code>&lt;td&gt;</code></li>
  <li>headers must include <code>scope="col"</code> or <code>scope="row"</code></li>
  <li>visual styling alone does not create structure</li>
  <li>screen readers rely on markup, not appearance</li>
</ul>

<hr class="govuk-section-break govuk-section-break--m govuk-section-break--visible">

<h2 class="govuk-heading-m">Review the flight schedule</h2>
<p class="govuk-body">
  One of the column “headers” below is actually marked up as a normal table cell.
  It also looks slightly out of place compared to the real headers.
</p>

<table class="govuk-table">
  <thead class="govuk-table__head">
    <tr class="govuk-table__row">
      <th scope="col" class="govuk-table__header">Reindeer</th>
      <th scope="col" class="govuk-table__header">Cruising speed</th>

      {# ❌ Deliberate accessibility issue #}
      <td class="govuk-table__cell" style="background:#f7d7d7;">
        <strong>❌ Pilot elf</strong><br>
        <span style="font-size:14px; color:#000;">
          Styled like a header, but not a real header
        </span>
      </td>
    </tr>
  </thead>

  <tbody class="govuk-table__body">
    <tr class="govuk-table__row">
      <td class="govuk-table__cell">Dasher</td>
      <td class="govuk-table__cell">900 km/h</td>
      <td class="govuk-table__cell">Buddy the Elf</td>
    </tr>
    <tr class="govuk-table__row">
      <td class="govuk-table__cell">Dancer</td>
      <td class="govuk-table__cell">900 km/h</td>
      <td class="govuk-table__cell">Papa Elf</td>
    </tr>
  </tbody>
</table>

<h2 class="govuk-heading-m">
  Finding this using the Web Accesibility Viewer for Elves (WAVE)
</h2>

<p class="govuk-body">
  When the <strong>Web Accesibility Viewer for Elves (WAVE)</strong> is run on a page like this,
  it correctly detects that a data table is present.
</p>

<p class="govuk-body">
  However, because the “Pilot elf” column is marked up as a <code>&lt;td&gt;</code>
  instead of a <code>&lt;th&gt;</code>, WAVE only reports <strong>2 column headers</strong>,
  even though <strong>3 columns are visible</strong> on the page.
</p>

<p class="govuk-body">
  This is a useful clue that the visual layout and the underlying structure do not match.
</p>

<img
  src="{{ asset_path }}images/wave11.png"
  alt="WAVE accessibility tool showing a data table with two column headers detected despite three visible columns"
  style="width: 35%; border-radius: 8px;">

<h2 class="govuk-heading-m">Checking the markup directly</h2>

<p class="govuk-body">
  You can confirm this issue by inspecting the table markup.
</p>

<ul class="govuk-list govuk-list--bullet">
  <li>right click on the table and select <strong>Inspect</strong></li>
  <li>or open your browser’s developer tools and use the inspect tool</li>
</ul>

<p class="govuk-body">
  When you inspect the table headers, you’ll see that the “Pilot elf” column is
  marked up as a <code>&lt;td&gt;</code> instead of a <code>&lt;th&gt;</code>.
  Although it visually looks like a header because it uses <code>&lt;strong&gt;</code>,
  assistive technologies do not recognise it as one.
</p>

<img
  src="{{ asset_path }}images/inspecttable.png"
  alt="Browser inspection tools showing a table cell marked up as td instead of th"
  style="width: 35%; border-radius: 8px;">

<h2 class="govuk-heading-m">What this checks for</h2>

<p class="govuk-body"><a href="https://www.w3.org/WAI/WCAG22/Understanding/info-and-relationships.html" class="govuk-link" target="_blank">1.3.1 info and relationships (opens in a new tab)</a></strong> – relationships in data must be conveyed programmatically, not just visually.</p> 


<h2 class="govuk-heading-m">Why this matters</h2>
<p class="govuk-body">
  Screen reader users rely on table headers to understand how each piece of data
  relates to the rest of the table. If headers are missing or incorrect, the
  information becomes confusing or unusable.
</p>

<h2 class="govuk-heading-m">Bonus challenge</h2>
<p class="govuk-body">
  Turn on a screen reader and move through the table by cell.
  Which column name is not announced?
</p>

{{ super() }}
{% endblock %}

{% block dayNavigation %}
<div class="govuk-!-margin-top-6 govuk-!-margin-bottom-6">
  <nav class="govuk-body" aria-label="Day navigation">
    <a class="govuk-link govuk-!-margin-right-4"
       href="/advent-calendar/day-10">
      ← Previous day
    </a>
    <a class="govuk-link"
       href="/advent-calendar/day-12">
      Next day →
    </a>
  </nav>
</div>
{% endblock %}
