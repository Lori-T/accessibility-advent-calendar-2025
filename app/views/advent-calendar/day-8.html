{% extends "/layouts/main.html" %}

{% set pageTitle = "Day 8: Check error messages on the Gift Labelling Machine" %}
{% set currentDayNumber = 8 %}

{% block beforeContent %}
  {{ govukBackLink({
      text: "Back to home",
      href: "/"
  }) }}
{% endblock %}

{% block content %}

<h1 class="govuk-heading-l">Day 8: Check error messages on the Gift Labelling Machine</h1>

<p class="govuk-body">
  The <strong>Gift Labelling Machine</strong> applies tags to presents as they move
  through Santa’s workshop. When something goes wrong, elves rely on clear error
  messages to understand what needs fixing.
</p>

<p class="govuk-body">
  Some elves have reported that error messages are easy to miss or unclear,
  especially when using assistive technologies like screen readers.
</p>

<h2 class="govuk-heading-m">Your mission today</h2>
<p class="govuk-body">
  Check that error messages are easy to spot, clearly explained and linked to
  the fields they relate to.
</p>

<h2 class="govuk-heading-m">Quick 5-minute check</h2>
<ul class="govuk-list govuk-list--bullet">
  <li>errors should appear next to the field that needs fixing</li>
  <li>error messages must explain what went wrong and how to fix it</li>
  <li>errors must be programmatically linked to the input</li>
  <li>screen readers should announce errors when focus moves to the field</li>
  <li>
    automated tools such as the <strong>Web Accesibility Viewer for Elves (WAVE)</strong>
    can sometimes help highlight problems with errors, but manual testing or code inspection is essential for this check
  </li>
</ul>

<hr class="govuk-section-break govuk-section-break--m govuk-section-break--visible">

<h2 class="govuk-heading-m">Test the Gift Labelling Machine</h2>
<p class="govuk-body">
  The form below contains one deliberate accessibility issue related to error messaging.
</p>

<div class="govuk-!-padding-4 govuk-!-margin-bottom-4" style="background:#fff8f8; border-radius:8px;">

  <div class="govuk-form-group govuk-form-group--error">
    <label class="govuk-label" for="gift-id">Gift ID</label>
    <span class="govuk-error-message">
      Enter a valid gift ID
    </span>
    <input class="govuk-input govuk-input--error" id="gift-id">
  </div>

 <div class="govuk-form-group">
  <label class="govuk-label" for="label-text">Festive label text</label>
  <span class="govuk-body" style="color:#d4351c;">
    There is a problem with this field
  </span>
  <input class="govuk-input" id="label-text">
</div>


</div>
<details class="govuk-details govuk-!-margin-top-4">
  <summary class="govuk-details__summary">
    <span class="govuk-details__summary-text">
      Show answer and explanation
    </span>
  </summary>

  <div class="govuk-details__text">

    <h3 class="govuk-heading-s">Which field has the issue</h3>

    <p class="govuk-body">
      The <strong>“Festive label text”</strong> field displays an error message,
      but that message is not associated with the input.
    </p>

    <h3 class="govuk-heading-s">What users experience</h3>

    <p class="govuk-body">
      Screen reader users are not told that this field has an error when they
      move focus to it.
    </p>

    <p class="govuk-body">
      The error text is visible on screen, but it is not announced or connected
      to the field in any meaningful way.
    </p>    
    
    <h3 class="govuk-heading-s">What works correctly</h3>

    <p class="govuk-body">
      The <strong>Gift ID</strong> field uses a clear error message that is
      visually and programmatically associated with the input.
    </p>

    <p class="govuk-body">
      When focus moves to that field, screen readers announce both the error
      and the label together.
    </p>

  </div>
</details>

<h2 class="govuk-heading-m">What this checks for</h2>

<p class="govuk-body">
  <strong>
    <a href="https://www.w3.org/WAI/WCAG22/Understanding/info-and-relationships.html"
       class="govuk-link"
       target="_blank">
      1.3.1 info and relationships (opens in a new tab)
    </a>
  </strong>
  – error messages must be programmatically linked to the fields they describe.
</p>

<h2 class="govuk-heading-m">Why this matters</h2>
<p class="govuk-body">
  If users cannot find or understand an error message, they cannot correct it.
  This can completely block people from completing a task.
</p><p class="govuk-body"> Error messages must be programmatically linked to the input they relate to,
      so assistive technologies can announce them at the right time. Without this connection, users may not know what went wrong or how to fix it.</p>

<h2 class="govuk-heading-m">Bonus challenge</h2>
<p class="govuk-body">
  Try completing the form using only a screen reader.
  Which error message is hardest to find or understand?
</p>

{{ super() }}
{% endblock %}

{% block dayNavigation %}
<div class="govuk-!-margin-top-6 govuk-!-margin-bottom-6">
  <nav class="govuk-body" aria-label="Day navigation">

    {% if currentDayNumber > 1 %}
      <a class="govuk-link govuk-!-margin-right-4"
         href="/advent-calendar/day-{{ currentDayNumber - 1 }}">
        ← Previous day
      </a>
    {% endif %}

    {% if currentDayNumber < 12 %}
      <a class="govuk-link"
         href="/advent-calendar/day-{{ currentDayNumber + 1 }}">
        Next day →
      </a>
    {% endif %}

  </nav>
</div>
{% endblock %}
