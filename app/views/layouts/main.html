{% extends "govuk-prototype-kit/layouts/govuk-branded.njk" %}
{% from "govuk/components/service-navigation/macro.njk" import govukServiceNavigation %}

{% block beforeContent %}
  {{ govukPhaseBanner({
    tag: { text: "Training" },
    html: 'This is not a real service ‚Äì this is for training purposes only. You can give your feedback on this resource by <a class="govuk-link" href="mailto:lorithomson@hotmail.co.uk">email</a> or <a href="https://www.surveymonkey.com/r/8JZX5KD" class="govuk-link" target="_blank" rel="noopener noreferrer">survey</a>.'
  }) }}
{% endblock %}

{% block head %}
  {{ super() }}

  <!-- Remove default GOV.UK favicon -->
  <link rel="icon" href="" type="image/x-icon">
  <link rel="shortcut icon" href="" type="image/x-icon">

  <!-- Santa emoji favicon -->
  <link rel="icon"
        type="image/svg+xml"
        href='data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><text y=".9em" font-size="90">üéÖ</text></svg>'>
{% endblock %}

{% block header %}
<header class="govuk-header" role="banner" data-module="govuk-header">
  <div class="govuk-header__container govuk-width-container">
    <div class="govuk-header__logo">
      <a href="/" class="govuk-header__link govuk-header__link--homepage">
        <img src="{{ asset_path }}images/DEA_logo_full.png"
             alt="Department for Elfish Affairs"
             class="santa-logo"
             width="250" height="60">
      </a>
    </div>

    {% if serviceName %}
      <div class="govuk-header__content">
        <a href="/" class="govuk-header__link govuk-header__service-name">
          {{ serviceName }}
        </a>
      </div>
    {% endif %}
  </div>
</header>
{% endblock %}

{% block stylesheets %}
  {{ super() }}

  <!-- Floating festive toggle button (styling in application.scss) -->
  <button id="festive-toggle"
          class="govuk-button govuk-button--secondary"
          type="button"
          aria-pressed="false">
    üéÑ Turn off festive effects
  </button>

  <script>
    document.addEventListener('DOMContentLoaded', function () {
      const body = document.body;
      const btn = document.getElementById('festive-toggle');
      if (!btn) return;

      // restore previous setting
      const pref = localStorage.getItem('festiveEffects');
      if (pref === 'off') {
        body.classList.add('no-festive');
        btn.textContent = '‚ùÑÔ∏è Turn on festive effects';
        btn.setAttribute('aria-pressed', 'false');
      }

      btn.addEventListener('click', function () {
        const active = !body.classList.contains('no-festive');

        if (active) {
          body.classList.add('no-festive');
          btn.textContent = '‚ùÑÔ∏è Turn on festive effects';
          btn.setAttribute('aria-pressed', 'false');
          localStorage.setItem('festiveEffects', 'off');
        } else {
          body.classList.remove('no-festive');
          btn.textContent = 'üéÑ Turn off festive effects';
          btn.setAttribute('aria-pressed', 'true');
          localStorage.setItem('festiveEffects', 'on');
        }
      });
    });
  </script>
{% endblock %}

{% block content %}{% endblock %}


{% block footer %}
  {{ govukFooter({
    meta: {
      items: [
        { href: "/manage-prototype/clear-data", text: "Clear data" },
        { href: "/tasklist", text: "View your reports" },
        { href: "/guidance", text: "How to spot Santa" },
        { href: "/accessibility", text: "Accessibility statement" },
        { href: "/about", text: "About this service" },
        { href: "https://www.surveymonkey.com/r/8JZX5KD", text: "Feedback survey" },
        { href: "https://github.com/Lori-T/record-an-elf-sighting", text: "GitHub" }
      ],
      visuallyHiddenTitle: "Footer links"
    },
    contentLicence: { text: "¬© 2025 Department for Elfish Affairs" }
  }) }}
{% endblock %}
